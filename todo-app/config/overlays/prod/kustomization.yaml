apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- ./../../base
- namespace/manifests/namespace.yaml
- volume/manifests/persistentvolumeclaim.yaml
- volume/manifests/persistentvolume.yaml
- postgres-db/manifests/backup.yaml
- postgres-db/manifests/volume.yaml

patchesStrategicMerge:
- broadcast/manifests/deployment.yaml
- todo-app-web-server/manifests/deployment.yaml
- todo-backend/manifests/deployment.yaml

namespace: production

images:
- name: BACKEND/IMAGE
  newName: wilky2/todobackend
  newTag: 074d26ecc43b0fc580422eaeb0c5bab17c7d56da
- name: BROADCAST/IMAGE
  newName: wilky2/broadcast
  newTag: 074d26ecc43b0fc580422eaeb0c5bab17c7d56da
- name: FRONTEND/IMAGE
  newName: wilky2/todoappwebserver
  newTag: 074d26ecc43b0fc580422eaeb0c5bab17c7d56da
